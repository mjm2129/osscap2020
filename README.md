# HalliGalli Game

 기존 할리갈리 게임과 달리 본 할리갈리 게임은 사용자가 직접 카드를 뒤집지 않고, 자동으로 1초마다 카드가 갱신된다.
또한 각자 종을 치도록 하기 위하여 플레이어 수만큼 압력센서를 사용한다.

## 1. 프로그램 설치

  $ git clone https://github.com/mjm2129/osscap2020.git

## 2. 사용법

### 2.1 실행 명령어

  $ sudo python3 halligalli.py
  
### 2.2 게임 모드
  본 게임은 1P / 4P 두가지 모드를 제공한다. 
  게임 시작후 LED 에 "MODE 1P OR 4P" 가 나타나고, 1번 압력센서를 누르면 1P mode, 4번 압력센서를 누르면 4P mode로 설정된다.
  
  #### 2.2.1 1P mode
  
   1P mode 는 컴퓨터와 1:1 대전이며, HARD, NORMAL, EASY 3가지 난이도를 설정할 수 있다. 
   화면에 보이는 난이도 번호에 해당되는 압력센서를 누르면 해당 난이도로 설정된다.
   (난이도는 컴퓨터가 종을 치는 속도에 따라 달라진다. 어려움 난이도라면, 컴퓨터가 종을 빨리 치고, 쉬움 난이도라면 컴퓨터가 종을 느리게 친다.)
   난이도는 게임을 제작할 때 직접 플레이를 해보면서 정했다.
  
  #### 2.2.2 4P mode
 
  4P mode는 게임 시작전 4명의 플레이어가 ready를 해야 시작할 수 있다. 각자의 번호에 맞는 압력센서를 누르면 ready 상태가 되고, 
  LED 출력을 통해서 ready 상황을 파악할 수 있다.
  4명의 플레이어 모두 ready 상태이면 "ALL READY" 라고 LED에 출력이 되고, 잠시 뒤 1P 부터 카드를 뒤집으며 게임이 시작된다. 
  

## 3. 게임 설명
 ### 카드
 카드의 총 수는 56장이며, 
 1Pmode는 플레이어와 컴퓨터가 각각 카드를 28장씩,
 4P mode는 각 플레이어가 카드를 14장씩 나눠갖는다.
 카드의 종류는 ( 빨강/파랑/노랑/초록) 4개가 있으며, 각 카드가 나타내는 숫자는 (1,2,3,4,5)가 있다.

 ### 승리조건
 게임을 승리하는 조건은 한 플레이어만 살아있고, 나머지 플레이어는 모두 죽었을 때 남은 플레이어가 승리한다.
 게임에서 승리하게 되면 어떤 플레이어가 승리했는지 LED에 출력해준다.
 4p mode의 경우는 

 ### 패배조건 
 게임을 패배하는 조건은
 1. 카드를 뒤집어야 할 차례인데, 현재  패에 카드가 하나도 없으면(0장이면) 그 플레이어는  패배한다.
 2. 플레이어가 센서를 잘못 눌렀을 때, 부과되는 페널티를 견딜만큼의 카드가 없다면 패배한다.

 ### 게임규칙
 처음 게임이 시작될때, 1p부터 차례대로 카드를 뒤집기 시작한다.(각 카드마다 LED에 출력해줌)
 이후, 게임의 진행 상황에 따라서 순서가 바뀐다.
 

 한 라운드를 승리하려면 게임판의 상황이 '한 종류의 카드의 합이 5를 나타낼 때' 플레이어가 압력센서를 눌러야 한다.
 예시) 게임판에 (빨강2/ 초록3/ 노랑4/ 빨강3) 의 카드가 있다면, 빨강 카드 숫자의 합이 5이므로, 이때 압력센서를 누르면 센서를 누른 플레이어가 승리한다.
 카드를 한장 뒤집을 때, 원래 게임판에 존재하던 카드는 사라지고 새 카드가 게임판에 갱신된다.
 카드가 한 장 갱신될때마다 플레이어의 패의 카드 수는 1씩 줄어들고, 게임판의 카운트가 1씩 올라간다. 
 어떤 플레이어가 한 라운드를 승리하게 되면 게임판에 쌓인 카운트 (네 명의 플레이어가 낸 카드 수) 만큼 패에 카드를 추가하게 된다.
 LED에는 어떤 플레이어가 승리했는지와, 승리한 플레이어가 몇초만에 압력센서를 눌렀는지를 출력해준다.
 이후 각 플레이어의 패 상황을 3초간 보여주고, 다음라운드를 시작한다.
 시작되는 라운드에서는, 방금 전에 승리했던 플레이어부터 카드를 뒤집기 시작한다.


 만약 플레이어가 한 종류의 카드가 5가 아닌경우에 압력센서를 누르게 되면, 센서를 누른 플레이어에게 페널티가 주어진다.
 본인을 제외하고 살아있는 모든 플레이어에게 자신의 패에서 카드를 한 장 씩 주게 된다.
 이 때, 본인의 카드가 부족해서 현재 살아있는 플레이어들에게 한 장 씩 카드를 줄 수 없는 상태라면, 곧바로 패배한다.
 어떤 플레이어가 한 라운드를 승리했을 때에는 게임판에 쌓인 카운트만큼 승리한 플레이어 패에 카드가 추가되고 새로운 라운드가 시작되지만,
 센서를 잘못 누른 경우에는 센서를 누른 플레이어에게 페널티를 부과하고, 카운트와 게임판을 초기화하지 않은 채 진행중이던 라운드를 재개한다.
 게임을 재개할 때, 센서를 눌렀던 플레이어(잘 못 눌러서 페널티를 받은 플레이어) 부터 카드를 뒤집기 시작한다.
 
 
 #### 최종 출력
 test.txt 파일에는 4p mode게임을 정상적으로 진행했던 모든 경우중에서 압력 센서를 가장 빨리 눌렀던 순서대로 플레이어와 그 시간이 10개 저장되어있다. 
 (예시: P1 0.023, P2 0.058, P3 0.7) 
 게임에서 각 플레이어마다 가장 빨랐던 시간(P1,P2,P3,P4가 게임에서 가장 빨랐던 속도 1개씩, 총 4개)을 저장해서 , text.txt 파일에 있는 10개의 기록들과 비교한다.
 test.txt 파일에 존재하는 시간 10개와 비교해서  test.txt 파일의 기록 10개의 순위에 들어갈 수 있다면, 새로 순위를 갱신하고, 10위 아래로 내려간 기록은 삭제한다.
 (게임을 한번 진행했을 때, text.txt 파일에는 새로운 기록이 최대 4개가 갱신될 수 있고, 최소 0개의 기록이 갱신될 수 있다.)
 

모든 게임이 끝났을 때 어떤 플레이어가 최종 승리를 했는지 출력해주고, 지금까지 가장 빨랐던 속도 10개를 credit 형태로 출력한다.
